name: Deploy Next.js to GitHub Pages

on:
  push:
    branches: ["main"] # âœ… deploy à¸­à¸±à¸•à¹‚à¸™à¸¡à¸±à¸•à¸´à¹€à¸¡à¸·à¹ˆà¸­ push à¹„à¸› main branch
  workflow_dispatch: # âœ… à¹ƒà¸«à¹‰à¸à¸” run à¹„à¸”à¹‰à¹€à¸­à¸‡à¸”à¹‰à¸§à¸¢

permissions:
  contents: write # âœ… à¹ƒà¸«à¹‰à¸ªà¸´à¸—à¸˜à¸´à¹Œà¹€à¸‚à¸µà¸¢à¸™à¹„à¸Ÿà¸¥à¹Œ (à¸ªà¸³à¸«à¸£à¸±à¸š deploy)

jobs:
  build-and-deploy:
    runs-on: ubuntu-latest

    steps:
      - name: ğŸ§© Checkout code
        uses: actions/checkout@v4

      - name: ğŸŸ¢ Setup Node.js
        uses: actions/setup-node@v4
        with:
          node-version: "20" # à¹ƒà¸Šà¹‰ Node.js 20
          cache: "npm"

      - name: ğŸ“¦ Install dependencies
        run: npm install

      - name: âš™ï¸ Build Next.js (export static)
        run: |
          npm run build
          npm run export

      - name: ğŸš€ Deploy to GitHub Pages
        uses: peaceiris/actions-gh-pages@v3
        with:
          github_token: ${{ secrets.GITHUB_TOKEN }}
          publish_dir: ./out
